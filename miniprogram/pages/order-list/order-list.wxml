<!--pages/order-list/order-list.wxml-->
<view class="container">
  <!-- 订单列表 -->
  <block wx:if="{{!loading && orders.length > 0}}">
    <view class="order-card" wx:for="{{orders}}" wx:key="id" bindtap="goToDetail" data-id="{{item.id}}">
      <view class="order-header">
        <text class="order-no">订单号: {{item.order_no}}</text>
        <text class="order-status status-{{item.status}}">{{statusMap[item.status]}}</text>
      </view>

      <view class="order-content">
        <image class="service-image" src="{{item.service_image || '/images/default-service.png'}}" mode="aspectFill"></image>
        <view class="order-info">
          <text class="service-name">{{item.service_name}}</text>
          <text class="order-detail-text">人数: {{item.person_count}}人</text>
          <text class="order-time">{{item.created_at}}</text>
        </view>
      </view>

      <view class="order-footer">
        <text class="order-amount">¥{{item.total_amount}}</text>
        <button wx:if="{{item.payment_status === 'unpaid' && item.status === 'pending'}}" class="pay-btn" catchtap="payOrder" data-id="{{item.id}}">立即支付</button>
      </view>
    </view>
  </block>

  <!-- 加载中 -->
  <view wx:if="{{loading}}" class="loading-state">
    <text>加载中...</text>
  </view>

  <!-- 空状态 -->
  <view wx:if="{{!loading && orders.length === 0}}" class="empty-state">
    <text class="empty-text">暂无订单</text>
    <navigator url="/pages/index/index" class="go-home-btn">
      去预约服务
    </navigator>
  </view>
</view>
