<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TabBar 图标生成器</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            max-width: 1200px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #8B4513;
            text-align: center;
        }
        .container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        .icon-box {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
            text-align: center;
        }
        .icon-box h3 {
            color: #333;
            margin-bottom: 20px;
        }
        canvas {
            display: block;
            margin: 20px auto;
            border: 2px solid #e8e8e8;
            border-radius: 8px;
        }
        button {
            background: #8B4513;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            transition: all 0.3s;
        }
        button:hover {
            background: #6B3410;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(139, 69, 19, 0.3);
        }
        .info {
            background: #fff5e6;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 4px solid #8B4513;
        }
        .info h2 {
            color: #8B4513;
            margin-top: 0;
        }
        .info ul {
            line-height: 1.8;
        }
    </style>
</head>
<body>
    <h1>道观服务预约 - TabBar 图标生成器</h1>

    <div class="info">
        <h2>使用说明</h2>
        <ul>
            <li>点击对应按钮下载图标</li>
            <li>将下载的 PNG 文件放入 <code>miniprogram/images/tabbar/</code> 目录</li>
            <li>图标尺寸：81×81px，线条清晰，背景透明</li>
            <li>已配置好的文件名：
                <ul>
                    <li>service-normal.png / service-active.png</li>
                    <li>order-normal.png / order-active.png</li>
                </ul>
            </li>
        </ul>
    </div>

    <div class="container">
        <div class="icon-box">
            <h3>服务清单 - 未选中</h3>
            <canvas id="service-normal" width="81" height="81"></canvas>
            <button onclick="downloadIcon('service-normal')">下载 service-normal.png</button>
        </div>

        <div class="icon-box">
            <h3>服务清单 - 选中</h3>
            <canvas id="service-active" width="81" height="81"></canvas>
            <button onclick="downloadIcon('service-active')">下载 service-active.png</button>
        </div>

        <div class="icon-box">
            <h3>我的订单 - 未选中</h3>
            <canvas id="order-normal" width="81" height="81"></canvas>
            <button onclick="downloadIcon('order-normal')">下载 order-normal.png</button>
        </div>

        <div class="icon-box">
            <h3>我的订单 - 选中</h3>
            <canvas id="order-active" width="81" height="81"></canvas>
            <button onclick="downloadIcon('order-active')">下载 order-active.png</button>
        </div>
    </div>

    <script>
        // 颜色配置
        const COLORS = {
            normal: '#666666',
            active: '#8B4513'
        };

        // 绘制服务清单图标（列表图标）
        function drawServiceIcon(ctx, color) {
            ctx.strokeStyle = color;
            ctx.fillStyle = color;
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';

            // 绘制三条横线（列表）
            const lines = [
                { x: 20, y: 25, width: 41 },
                { x: 20, y: 40, width: 41 },
                { x: 20, y: 55, width: 41 }
            ];

            lines.forEach(line => {
                // 圆点
                ctx.beginPath();
                ctx.arc(line.x, line.y, 3, 0, Math.PI * 2);
                ctx.fill();

                // 横线
                ctx.beginPath();
                ctx.moveTo(line.x + 8, line.y);
                ctx.lineTo(line.x + line.width, line.y);
                ctx.stroke();
            });
        }

        // 绘制订单图标（文档图标）
        function drawOrderIcon(ctx, color) {
            ctx.strokeStyle = color;
            ctx.fillStyle = color;
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';

            // 绘制文档外框
            ctx.beginPath();
            ctx.moveTo(25, 18);
            ctx.lineTo(48, 18);
            ctx.lineTo(56, 26);
            ctx.lineTo(56, 63);
            ctx.lineTo(25, 63);
            ctx.closePath();
            ctx.stroke();

            // 绘制右上角折角
            ctx.beginPath();
            ctx.moveTo(48, 18);
            ctx.lineTo(48, 26);
            ctx.lineTo(56, 26);
            ctx.stroke();

            // 绘制文档内容线条
            const contentLines = [35, 43, 51];
            contentLines.forEach(y => {
                ctx.beginPath();
                ctx.moveTo(32, y);
                ctx.lineTo(49, y);
                ctx.stroke();
            });
        }

        // 初始化所有图标
        function initIcons() {
            // 服务清单 - 未选中
            const serviceNormal = document.getElementById('service-normal');
            const ctxSN = serviceNormal.getContext('2d');
            drawServiceIcon(ctxSN, COLORS.normal);

            // 服务清单 - 选中
            const serviceActive = document.getElementById('service-active');
            const ctxSA = serviceActive.getContext('2d');
            drawServiceIcon(ctxSA, COLORS.active);

            // 我的订单 - 未选中
            const orderNormal = document.getElementById('order-normal');
            const ctxON = orderNormal.getContext('2d');
            drawOrderIcon(ctxON, COLORS.normal);

            // 我的订单 - 选中
            const orderActive = document.getElementById('order-active');
            const ctxOA = orderActive.getContext('2d');
            drawOrderIcon(ctxOA, COLORS.active);
        }

        // 下载图标
        function downloadIcon(id) {
            const canvas = document.getElementById(id);
            const link = document.createElement('a');
            link.download = `${id}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        // 下载所有图标
        function downloadAllIcons() {
            const ids = ['service-normal', 'service-active', 'order-normal', 'order-active'];
            ids.forEach((id, index) => {
                setTimeout(() => downloadIcon(id), index * 300);
            });
        }

        // 页面加载时初始化
        window.addEventListener('load', initIcons);
    </script>

    <div style="text-align: center; margin-top: 40px;">
        <button onclick="downloadAllIcons()" style="font-size: 16px; padding: 15px 40px;">
            一键下载全部图标
        </button>
    </div>

    <div style="text-align: center; margin-top: 30px; color: #999; font-size: 14px;">
        <p>生成后请将图标放入：<code>daoguan-miniprogram/miniprogram/images/tabbar/</code></p>
        <p>图标已自动适配微信小程序 TabBar 规范</p>
    </div>
</body>
</html>
